webpackJsonp([3],{103:function(t,e,n){var a=n(81);"string"==typeof a&&(a=[[t.i,a,""]]),n(4)(a,{}),a.locals&&(t.exports=a.locals)},32:function(t,e,n){var a,o;n(103),a=n(69);var s=n(93);o=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(o=a=a.default),"function"==typeof o&&(o=o.options),o.name=o.name||"index",o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=a},37:function(t,e,n){"use strict";(function(t){e.default={data:function(){return{user:{loginname:localStorage.loginname||"",avatar:localStorage.avatar||"",id:localStorage.id||"",accesstoken:localStorage.accesstoken||"",score:localStorage.score||"",message:0},curTab:this.$route.name||"index"}},computed:{},created:function(){this.user.loginname&&!this.user.score&&this.fetchUserInfo(),this.user.loginname&&this.fetchMessage()},mounted:function(){},methods:{fetchUserInfo:function(){var e=this,n=this;t.ajax({url:"https://cnodejs.org/api/v1/user/"+n.user.loginname,type:"GET"}).done(function(t){t&&t.success&&(e.user.score=localStorage.score=t.data.score)}).fail(function(t){})},fetchMessage:function(){var e=this,n=this;t.ajax({url:"https://cnodejs.org/api/v1/message/count/",type:"GET",data:{accesstoken:n.user.accesstoken}}).done(function(t){t&&t.success&&(e.user.message=localStorage.message=t.data)}).fail(function(t){})},logout:function(){var t=this;localStorage.clear(),this.$message({showClose:!0,message:"退出成功",type:"success",onClose:function(){t.$route.matched.some(function(t){return t.meta.requiresAuth})?t.$router.push({name:"index",query:{tab:"all"}}):window.location.reload()}})}},components:{}}}).call(e,n(2))},38:function(t,e,n){e=t.exports=n(3)(),e.push([t.i,"\n#header {\n  background-color: #324057;\n}\n#header #logo {\n    width: 120px;\n    padding: 10px 55px;\n    height: 28px;\n    display: block;\n    float: left;\n}\n#header #logo img {\n      max-width: 100%;\n      max-height: 100%;\n}\n#header #navbar {\n    background-color: transparent;\n}\n#header #navbar .avatar {\n      width: 30px;\n      height: 30px;\n}\n#header #navbar .mark {\n      margin-top: 8px;\n      line-height: 1;\n      float: right;\n}\n",""])},39:function(t,e,n){var a,o;n(41),a=n(37);var s=n(40);o=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(o=a=a.default),"function"==typeof o&&(o=o.options),o.name=o.name||"header",o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=a},40:function(module,exports){module.exports={render:function(){with(this)return _h("header",{attrs:{id:"header"}},[_m(0)," ",_h("el-menu",{staticClass:"el-menu-demo",attrs:{id:"navbar",theme:"dark","default-active":curTab,mode:"horizontal",router:""}},[_h("el-menu-item",{attrs:{index:"index",route:{name:"index",query:{tab:"all"}}}},["首页"])," ",_h("el-menu-item",{attrs:{index:"api",route:{name:"api"}}},["API"])," ",_h("el-menu-item",{attrs:{index:"about",route:{name:"about"}}},["关于"])," ",user.loginname?_e():_h("el-menu-item",{attrs:{index:"login",route:{name:"login"}}},["登录"])," ",user.loginname?_h("el-submenu",{attrs:{index:"user"}},[_h("template",{slot:"title"},[_h("img",{staticClass:"avatar",attrs:{src:user.avatar,alt:""}}),_s(user.loginname),user.message?_h("el-badge",{staticClass:"mark",attrs:{max:99},domProps:{value:user.message}}):_e()])," ",_h("el-menu-item",{attrs:{index:"",route:{name:"user",params:{name:user.loginname}}}},["个人主页"])," ",_h("el-menu-item",{attrs:{index:""}},[_m(1),_s(user.score)])," ",_h("el-menu-item",{attrs:{index:"",route:{name:"message"}}},[_m(2),"消息",_h("el-badge",{staticClass:"mark",attrs:{max:99},domProps:{value:user.message}})])," ",_h("el-menu-item",{attrs:{index:""},nativeOn:{click:function(t){logout(t)}}},[_m(3),"退出"])]):_e()," ",user.loginname?_h("el-menu-item",{attrs:{index:"newtopic",route:{name:"newtopic"}}},["发布话题"]):_e()])])},staticRenderFns:[function(){with(this)return _h("a",{attrs:{id:"logo"}},[_h("img",{attrs:{src:"https://o4j806krb.qnssl.com/public/images/cnodejs_light.svg",alt:""}})])},function(){with(this)return _h("span",["积分："])},function(){with(this)return _h("i",{staticClass:"el-icon-message"})},function(){with(this)return _h("i",{staticClass:"el-icon-upload2"})}]}},41:function(t,e,n){var a=n(38);"string"==typeof a&&(a=[[t.i,a,""]]),n(4)(a,{}),a.locals&&(t.exports=a.locals)},42:function(t,e,n){"use strict";e.default={data:function(){return{}},props:["showLoading"]}},43:function(t,e,n){e=t.exports=n(3)(),e.push([t.i,"\n.el-loading-demo {\n  border: 1px solid #999;\n  border-radius: 4px;\n  height: 100px;\n}\n",""])},44:function(t,e,n){var a,o;n(46),a=n(42);var s=n(45);o=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(o=a=a.default),"function"==typeof o&&(o=o.options),o.name=o.name||"loading",o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=a},45:function(module,exports){module.exports={render:function(){with(this)return _h("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:showLoading,expression:"showLoading",modifiers:{fullscreen:!0}}]})},staticRenderFns:[]}},46:function(t,e,n){var a=n(43);"string"==typeof a&&(a=[[t.i,a,""]]),n(4)(a,{}),a.locals&&(t.exports=a.locals)},58:function(t,e,n){"use strict";e.default={data:function(){return{}},props:["topics","hideCount"],computed:{},mounted:function(){},methods:{},components:{}}},59:function(t,e,n){e=t.exports=n(3)(),e.push([t.i,"\n.topic {\n  border-top: 1px solid #f0f0f0;\n  padding: 10px 0;\n}\n.topic:nth-of-type(1) {\n    border-top: none;\n    padding-top: 0;\n}\n.topic .creater-avatar {\n    display: inline-block;\n}\n.topic .creater-avatar img {\n      width: 30px;\n      height: 30px;\n}\n.topic .count {\n    font-size: 10px;\n    width: 70px;\n    display: inline-block;\n    text-align: center;\n}\n.topic .count .reply {\n      font-size: 14px;\n      color: #9e78c0;\n}\n.topic .count .seperator {\n      margin: 0 -3px;\n}\n.topic .type {\n    padding: 2px 4px;\n    border-radius: 3px;\n    font-size: 12px;\n}\n.topic .type.hasColor {\n      background: #80bd01;\n      color: #fff;\n}\n.topic .type.noColor {\n      background-color: #e5e5e5;\n      color: #999;\n}\n.topic .title {\n    max-width: 70%;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n    display: inline-block;\n    vertical-align: middle;\n    font-size: 16px;\n    line-height: 30px;\n    margin-left: 10px;\n}\n.topic .last-reply-time {\n    float: right;\n    text-align: right;\n    min-width: 50px;\n    display: inline-block;\n    white-space: nowrap;\n    color: #778087;\n    font-size: 11px;\n}\n",""])},61:function(t,e,n){var a,o;n(63),a=n(58);var s=n(62);o=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(o=a=a.default),"function"==typeof o&&(o=o.options),o.name=o.name||"list",o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=a},62:function(module,exports){module.exports={render:function(){with(this)return _h("section",{staticClass:"article-list"},[_l(topics,function(t){return _h("article",{staticClass:"topic"},[_h("router-link",{staticClass:"creater-avatar avatar",attrs:{to:{name:"user",params:{name:t.author.loginname}}}},[_h("img",{attrs:{src:t.author.avatar_url,alt:""}})])," ",hideCount?_e():_h("span",{staticClass:"count"},[_h("span",{staticClass:"reply",domProps:{textContent:_s(t.reply_count||0)}})," ",_m(0,!0)," ",_h("span",{staticClass:"visit",domProps:{textContent:_s(t.visit_count||0)}})])," ",t.typeClass?_h("el-tag",{class:t.typeClass,attrs:{type:t.typeClass,hit:!1}},[_s(_f("getArticleType")(t.top,t.good,t.tab))]):_e()," ",_h("router-link",{staticClass:"title",attrs:{to:{name:"topic",params:{id:t.id}}},domProps:{textContent:_s(t.title)}})," ",t.create_at?_h("span",{staticClass:"last-reply-time"},["发布于 "+_s(_f("getDateFromNow")(t.create_at))]):_e()])})])},staticRenderFns:[function(){with(this)return _h("span",{staticClass:"seperator"},["/"])}]}},63:function(t,e,n){var a=n(59);"string"==typeof a&&(a=[[t.i,a,""]]),n(4)(a,{}),a.locals&&(t.exports=a.locals)},69:function(t,e,n){"use strict";(function(t){var a=n(39),o=n.n(a),s=n(44),i=n.n(s),r=n(61),c=n.n(r);e.default={data:function(){return{topics:[],curTab:this.$route.query.tab||"all",queryData:{page:1,tab:"all",limit:20,mdrender:!0},loading:{showLoading:!1,show:function(){this.showLoading=!0},hide:function(){this.showLoading=!1}},scrollLock:!1}},computed:{},created:function(){sessionStorage.setItem("tab",this.queryData.tab)},watch:{$route:function(){this.curTab=this.$route.query.tab||"all",this.fetchTopics()}},mounted:function(){var t=this;this.fetchTopics(),window.addEventListener("scroll",function(e){t.scrollLoad()})},methods:{fetchTopics:function(){var e=this;this.loading.show();var n=this.$route.query.tab||"all",a=n===this.queryData.tab;this.queryData.tab=n,t.ajax({url:"https://cnodejs.org/api/v1/topics",type:"GET",data:this.queryData}).done(function(t){e.loading.hide(),e.scrollLock=!0,t&&t.success&&(t.data.forEach(function(t,n){t.typeClass=e.getTypeClass(t.top,t.good,t.tab)}),a||(e.topics=[]),e.topics=e.topics.concat(t.data))}).fail(function(t){e.showLoading=!1})},getTypeClass:function(t,e,n){return t?"success":e?"danger":"ask"==n?"primary":"job"==n?"warning":"share"==n?"":(t||e||n)&&this.$route.query.tab!==n?"":"hidden"},scrollLoad:function(){if(this.scrollLock){var t=document.body,e=t.clientHeight+t.scrollTop,n=t.scrollHeight;e>n-10&&(this.scrollLock=!1,this.queryData.page++,this.fetchTopics())}}},components:{cvHead:o.a,cvLoading:i.a,cvList:c.a}}}).call(e,n(2))},81:function(t,e,n){e=t.exports=n(3)(),e.push([t.i,"\n#content .index .el-card__header {\n  padding: 0;\n  background-color: #eff2f7;\n}\n",""])},93:function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"container"}},[_h("cvHead")," ",_h("main",{attrs:{id:"main"}},[_h("el-row",{attrs:{gutter:20,id:"container"}},[_h("el-col",{attrs:{span:18,id:"content",offset:3}},[_h("div",{staticClass:"grid-content bg-purple"},[_h("el-card",{staticClass:"box-card index"},[_h("div",{slot:"header",staticClass:"clearfix index-nav"},[_h("el-menu",{staticClass:"el-menu-demo",attrs:{id:"navbar",theme:"light","default-active":curTab,mode:"horizontal",router:""}},[_h("el-menu-item",{attrs:{index:"all",route:{name:"index",query:{tab:"all"}}}},["全部"])," ",_h("el-menu-item",{attrs:{index:"good",route:{name:"index",query:{tab:"good"}}}},["精华"])," ",_h("el-menu-item",{attrs:{index:"share",route:{name:"index",query:{tab:"share"}}}},["分享"])," ",_h("el-menu-item",{attrs:{index:"ask",route:{name:"index",query:{tab:"ask"}}}},["问答"])," ",_h("el-menu-item",{attrs:{index:"job",route:{name:"index",query:{tab:"job"}}}},["招聘"])])," ",_h("cvLoading",{attrs:{showLoading:loading.showLoading}})])," ",_h("cvList",{attrs:{topics:topics}})," ",_m(0)])])])])])])},staticRenderFns:[function(){with(this)return _h("section",{staticClass:"page"})}]}}});