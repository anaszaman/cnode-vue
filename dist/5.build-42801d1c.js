webpackJsonp([5],{102:function(t,e,n){var o=n(79);"string"==typeof o&&(o=[[t.i,o,""]]);n(5)(o,{});o.locals&&(t.exports=o.locals)},37:function(t,e,n){var o,a;n(102),o=n(69);var i=n(92);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.name=a.name||"index",a.render=i.render,a.staticRenderFns=i.staticRenderFns,t.exports=o},42:function(t,e,n){"use strict";e["default"]={data:function(){return{}},props:["showLoading"]}},43:function(t,e,n){e=t.exports=n(4)(),e.push([t.i,"\n.el-loading-demo {\n  border: 1px solid #999;\n  border-radius: 4px;\n  height: 100px;\n}\n",""])},44:function(t,e,n){var o,a;n(46),o=n(42);var i=n(45);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.name=a.name||"loading",a.render=i.render,a.staticRenderFns=i.staticRenderFns,t.exports=o},45:function(module,exports){module.exports={render:function(){with(this)return _h("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:showLoading,expression:"showLoading",modifiers:{fullscreen:!0}}]})},staticRenderFns:[]}},46:function(t,e,n){var o=n(43);"string"==typeof o&&(o=[[t.i,o,""]]);n(5)(o,{});o.locals&&(t.exports=o.locals)},58:function(t,e,n){"use strict";e["default"]={data:function(){return{topicstran:[]}},props:["topics","hideCount"],computed:{},mounted:function(){this.topicstran=[].concat(this.topics)},watch:{topics:function(){this.topicstran=[].concat(this.topics)}},methods:{},components:{}}},59:function(t,e,n){e=t.exports=n(4)(),e.push([t.i,"\n.topic {\n  border-top: 1px solid #f0f0f0;\n  padding: 10px 0;\n}\n.topic:nth-of-type(1) {\n    border-top: none;\n    padding-top: 0;\n}\n.topic .creater-avatar {\n    display: inline-block;\n}\n.topic .creater-avatar img {\n      width: 30px;\n      height: 30px;\n}\n.topic .count {\n    font-size: 10px;\n    width: 70px;\n    display: inline-block;\n    text-align: center;\n}\n.topic .count .reply {\n      font-size: 14px;\n      color: #9e78c0;\n}\n.topic .count .seperator {\n      margin: 0 -3px;\n}\n.topic .type {\n    padding: 2px 4px;\n    border-radius: 3px;\n    font-size: 12px;\n}\n.topic .type.hasColor {\n      background: #80bd01;\n      color: #fff;\n}\n.topic .type.noColor {\n      background-color: #e5e5e5;\n      color: #999;\n}\n.topic .title {\n    max-width: 70%;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n    display: inline-block;\n    vertical-align: middle;\n    font-size: 16px;\n    line-height: 30px;\n    margin-left: 10px;\n}\n.topic .last-reply-time {\n    float: right;\n    text-align: right;\n    min-width: 50px;\n    display: inline-block;\n    white-space: nowrap;\n    color: #778087;\n    font-size: 11px;\n}\n",""])},61:function(t,e,n){var o,a;n(63),o=n(58);var i=n(62);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.name=a.name||"list",a.render=i.render,a.staticRenderFns=i.staticRenderFns,t.exports=o},62:function(module,exports){module.exports={render:function(){with(this)return _h("transition-group",{staticClass:"article-list",attrs:{name:"transition",tag:"section"}},[_l(topicstran,function(t,e){return topics?_h("article",{key:e,staticClass:"topic"},[_h("router-link",{staticClass:"creater-avatar avatar",attrs:{to:{name:"user",params:{name:t.author.loginname}}}},[_h("img",{attrs:{src:t.author.avatar_url,alt:""}})])," ",hideCount?_e():_h("span",{staticClass:"count"},[_h("span",{staticClass:"reply",domProps:{textContent:_s(t.reply_count||0)}})," ",_m(0,!0)," ",_h("span",{staticClass:"visit",domProps:{textContent:_s(t.visit_count||0)}})])," ",t.typeClass?_h("el-tag",{"class":t.typeClass,attrs:{type:t.typeClass,hit:!1}},[_s(_f("getArticleType")(t.top,t.good,t.tab))]):_e()," ",_h("router-link",{staticClass:"title",attrs:{to:{name:"topic",params:{id:t.id}}},domProps:{textContent:_s(t.title)}})," ",t.create_at?_h("span",{staticClass:"last-reply-time"},["发布于 "+_s(_f("getDateFromNow")(t.create_at))]):_e()]):_e()})," "])},staticRenderFns:[function(){with(this)return _h("span",{staticClass:"seperator"},["/"])}]}},63:function(t,e,n){var o=n(59);"string"==typeof o&&(o=[[t.i,o,""]]);n(5)(o,{});o.locals&&(t.exports=o.locals)},69:function(t,e,n){"use strict";(function(t){var o=n(14),a=n.n(o),i=n(44),s=n.n(i),r=n(61),c=n.n(r);e["default"]={data:function(){return console.log(this.$store),{topics:[],curTab:this.$route.query.tab||"all",queryData:{page:1,tab:"all",limit:20,mdrender:!0},loading:{showLoading:!1,show:function(){this.showLoading=!0},hide:function(){this.showLoading=!1}},scrollLock:!1}},computed:{},watch:{$route:function(){this.curTab=this.$route.query.tab||"all",this.fetchTopics()}},mounted:function(){var e=this;sessionStorage.queryData&&sessionStorage.curTab===this.curTab?!function(){e.topics=JSON.parse(sessionStorage.topics||"[]"),e.queryData=JSON.parse(sessionStorage.queryData||e.queryData);var n=sessionStorage.scrollTop||0;e.$nextTick(function(){t(window).scrollTop(n)})}():this.fetchTopics(),t(window).on("scroll",function(t){e.scrollLoad()}),sessionStorage.removeItem("curTab"),sessionStorage.removeItem("topics"),sessionStorage.removeItem("queryData"),sessionStorage.removeItem("scrollTop")},beforeRouteLeave:function(e,n,o){"user"!==e.name&&"topic"!==e.name||(sessionStorage.curTab=n.query.tab||"all",sessionStorage.topics=JSON.stringify(this.topics),sessionStorage.queryData=JSON.stringify(this.queryData),sessionStorage.scrollTop=t(window).scrollTop()),t(window).off("scroll"),o()},methods:{fetchTopics:function(){var e=this;this.loading.show(),this.scrollLock=!0;var n=this.$route.query.tab||"all",o=n===this.queryData.tab;this.queryData.tab=n,t.ajax({url:"https://cnodejs.org/api/v1/topics",type:"GET",data:this.queryData}).done(function(t){e.loading.hide(),e.scrollLock=!1,t&&t.success&&(t.data.forEach(function(t,n){t.typeClass=e.getTypeClass(t.top,t.good,t.tab)}),o||(e.topics=[]),e.topics=e.topics.concat(t.data))}).fail(function(t){e.showLoading=!1})},getTypeClass:function(t,e,n){return t?"success":e?"danger":"ask"==n?"primary":"job"==n?"warning":"share"==n?"gray":(t||e||n)&&this.$route.query.tab!==n?"":"hidden"},scrollLoad:function(){if(!this.scrollLock){var t=document.body,e=t.clientHeight+t.scrollTop,n=t.scrollHeight;e>n-10&&(this.scrollLock=!1,this.queryData.page++,this.fetchTopics())}}},components:{cvHead:a.a,cvLoading:s.a,cvList:c.a}}}).call(e,n(1))},79:function(t,e,n){e=t.exports=n(4)(),e.push([t.i,"\n#content .index .el-card__header {\n  padding: 0;\n  background-color: #eff2f7;\n}\n",""])},92:function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"container"}},[_h("cvHead")," ",_h("main",{attrs:{id:"main"}},[_h("el-row",{attrs:{gutter:20,id:"container"}},[_h("el-col",{attrs:{span:18,id:"content",offset:3}},[_h("div",{staticClass:"grid-content bg-purple"},[_h("el-card",{staticClass:"box-card index"},[_h("div",{slot:"header",staticClass:"clearfix index-nav"},[_h("el-menu",{staticClass:"el-menu-demo",attrs:{id:"navbar",theme:"light","default-active":curTab,mode:"horizontal",router:""}},[_h("el-menu-item",{attrs:{index:"all",route:{name:"index",query:{tab:"all"}}}},["全部"])," ",_h("el-menu-item",{attrs:{index:"good",route:{name:"index",query:{tab:"good"}}}},["精华"])," ",_h("el-menu-item",{attrs:{index:"share",route:{name:"index",query:{tab:"share"}}}},["分享"])," ",_h("el-menu-item",{attrs:{index:"ask",route:{name:"index",query:{tab:"ask"}}}},["问答"])," ",_h("el-menu-item",{attrs:{index:"job",route:{name:"index",query:{tab:"job"}}}},["招聘"])])])," ",topics.length?_h("cvList",{attrs:{topics:topics}}):_e()," ",_m(0)])])])])])," ",_h("cvLoading",{attrs:{showLoading:loading.showLoading}})])},staticRenderFns:[function(){with(this)return _h("section",{staticClass:"page"})}]}}});